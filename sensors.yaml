#################################################################
## Sensors
#################################################################

        ##########################################################
        ## System
        ##########################################################

  - platform: time_date
    display_options:
      - 'date_time'
  - platform: cpuspeed
    name: CPU
  - platform: systemmonitor
    resources:
      - type: memory_free
      - type: memory_use_percent
      - type: processor_use
      - type: last_boot

        ##########################################################
        ## Pi Hole
        ##########################################################

  - platform: command_line
    name: PiHole 1 Status
    command: curl -X GET 'http://REDACTED.4/REDACTED/api.php?status'
    value_template: "{{ value_json.status == 'enabled' }}"

  - platform: command_line
    name: PiHole 2 Status
    command: curl -X GET 'http://REDACTED.5/REDACTED/api.php?status'
    value_template: "{{ value_json.status == 'enabled' }}"

        ##########################################################
        ## Ring
        ##########################################################

  - platform: ring
    monitored_conditions:
      - battery
      - last_activity
      - last_ding
      - last_motion
      - volume

        ##########################################################
        ## QNAP NAS
        ##########################################################

  - platform: qnap
    host: REDACTED.100
    port: 443
    username: !secret secret_qnap_username
    password: !secret secret_qnap_password
    ssl: true
    verify_ssl: false
    monitored_conditions:
      - status
      - memory_percent_used
      - system_temp
      - cpu_usage
      - cpu_temp
      - network_link_status
      - network_tx
      - network_rx
      - drive_temp
      - volume_size_free
      - volume_size_used
      - drive_smart_status
      - volume_percentage_used

        ##########################################################
        ## DNS Lookup
        ##########################################################

  - platform: dnsip
  - platform: dnsip
    hostname: !secret secret_dns_home_hostname
    name: REDACTED
  - platform: dnsip
    hostname: !secret secret_dns_REDACTED_hostname
    name: REDACTED
  - platform: dnsip
    hostname: !secret secret_dns_parents_hostname
    name: REDACTED

        ##########################################################
        ## Battery Sensors
        ##########################################################

  - platform: template
    sensors:
      basement_door_battery:
        value_template: '{{ states.binary_sensor.basement_door.attributes.battery_level }}'
        friendly_name: 'Basement Door'
        unit_of_measurement: '%'
      pantry_door_battery:
        value_template: '{{ states.binary_sensor.pantry_door.attributes.battery_level }}'
        friendly_name: 'Pantry Door'
        unit_of_measurement: '%'
      hall_closet_door_battery:
        value_template: '{{ states.binary_sensor.hall_closet_door.attributes.battery_level }}'
        friendly_name: 'Hall Closet Door'
        unit_of_measurement: '%'
      basement_motion_battery:
        value_template: '{{ states.binary_sensor.basement_motion_sensor.attributes.battery_level }}'
        friendly_name: 'Basement Motion'
        unit_of_measurement: '%'
      basement_drain_water_sensor_battery:
        value_template: '{{ states.binary_sensor.basement_drain_water_sensor.attributes.battery_level }}'
        friendly_name: 'Basement Drain Water Sensor'
        unit_of_measurement: '%'
      kitchen_sink_water_sensor_battery:
        value_template: '{{ states.binary_sensor.kitchen_sink_water_sensor.attributes.battery_level }}'
        friendly_name: 'Kitchen Sink Water Sensor'
        unit_of_measurement: '%'
      refrigerator_water_sensor_battery:
        value_template: '{{ states.binary_sensor.refrigerator_water_sensor.attributes.battery_level }}'
        friendly_name: 'Refrigerator Water Sensor'
        unit_of_measurement: '%'
      washing_machine_water_sensor_battery:
        value_template: '{{ states.binary_sensor.washing_machine_water_sensor.attributes.battery_level }}'
        friendly_name: 'Washing Machine Water Sensor'
        unit_of_measurement: '%'


        ##########################################################
        ## Washing Machine
        ##########################################################

  - platform: template
    sensors:
      washing_machine_current_power:
        value_template: '{{ states.switch.washing_machine.attributes.current_power_w }}'

  - platform: template
    sensors:
      washing_machine_status:
        value_template: >-
          {%- if states('sensor.washing_machine_current_power') | int >= 3 %}
            running
          {% else %}
            not running
          {% endif %}
        friendly_name: 'Washing Machine Status'

        ##########################################################
        ## Golf Cart
        ##########################################################

  - platform: template
    sensors:
      golf_cart_current_power:
        value_template: '{{ states.switch.golf_cart.attributes.current_power_w }}'

  - platform: template
    sensors:
      golf_cart_status:
        value_template: >-
          {% if states('sensor.golf_cart_current_power') | int >= 700 %}
            charging high power
          {% elif states('sensor.golf_cart_current_power') | int >= 200 %}
            charging
          {% elif states('sensor.golf_cart_current_power') | float >= 0.050 %}
            charged
          {% else %}
            unplugged
          {% endif %}
        friendly_name: 'Golf Cart Status'

        ##########################################################
        ## HVAC Honeywell Air Cleaner
        ##########################################################

  - platform: template
    sensors:
      air_cleaner_current_power:
        value_template: '{{ states.switch.air_cleaner.attributes.current_power_w }}'
  - platform: template
    sensors:
      air_cleaner_status:
        value_template: >-
          {% if states('sensor.air_cleaner_current_power') | int <= 10 %}
            not running
          {% elif states('sensor.air_cleaner_current_power') | int >= 32 %}
            running high power
          {% else %}
            running
          {% endif %}
        friendly_name: 'Air Cleaner Status'

        ##########################################################
        ## HVAC Geothermal Sensors
        ##########################################################

  - platform: template
    sensors:
      thermostat_aux_heat:
        value_template: '{{ states.climate.home.attributes.aux_heat }}'

        ##########################################################
        ## Media Center
        ##########################################################

  - platform: template
    sensors:
      media_center:
        value_template: '{{ states.remote.media_center.attributes.current_activity }}'
        friendly_name: 'Media Center'

        ##########################################################
        ## Nest Protect Smoke and CO
        ##########################################################

  - platform: nest
    monitored_conditions:
       - 'co_status'
       - 'smoke__status'

        ##########################################################
        ## Dark Sky Sensor
        ##########################################################

  - platform: darksky
    api_key: !secret secret_darksky_api_key
    monitored_conditions:
      - summary
      - minutely_summary
      - hourly_summary
      - daily_summary
      - nearest_storm_distance
      - nearest_storm_bearing
      - precip_type
      - precip_intensity
      - precip_probability
      - temperature
      - apparent_temperature
      - dew_point
      - wind_speed
      - wind_bearing
      - cloud_cover
      - humidity
      - pressure
      - visibility
      - ozone

        ##########################################################
        ## UPS Monitoring - Power
        ##########################################################

  - platform: nut
    name: UPS
    host: REDACTED.100
    port: 3493
    alias: REDACTED
    username: REDACTED
    password: REDACTED
    resources:
      - ups.status.display
      - battery.charge
      - battery.runtime
      - ups.load
      - input.voltage

  - platform: template
    sensors:
      ups_battery_runtime_mins:
        friendly_name: "UPS Battery Runtime"
        unit_of_measurement: 'minutes'
        value_template: "{{ states('sensor.ups_battery_runtime')|float / 60 |round(1) }}"

        ##########################################################
        ## Roomba
        ##########################################################

#  - platform: template
#    sensors:
#      roomba_bin:
#        value_template: >-
#          {% if is_state('states.vacuum.roomba.attributes.bin_full', 'true') %}
#            full
#          {% else %}
#            not full
#          {% endif %}
#        friendly_name: 'Roomba Bin'
#
#  - platform: template
#    sensors:
#      roomba_battery:
#        value_template: '{{ states.vacuum.roomba.attributes.battery_level }}'
#        friendly_name: 'Roomba'
#        unit_of_measurement: '%'
#        device_class: battery
#  - platform: template
#    sensors:
#      roomba_status:
#        value_template: '{{ states.vacuum.roomba.attributes.status }}'
#        friendly_name: 'Roomba Status'

        ##########################################################
        ## Alarm System
        ##########################################################

  - platform: template
    sensors:
      alarm_system_trouble:
        value_template: '{{ states.sensor.home_alarm_keypad.attributes.trouble }}'
        friendly_name: 'Alarm System Trouble'

        ##########################################################
        ## National Weather Service Alerting - Custom Sensor
        ##########################################################

### WEATHER SERVICE Sensors
  - platform: nws_warnings
    zone_id: 'REDACTED'

  - platform: template
    sensors:
      nws_tornado_warning:
        value_template: '{{ states.sensor.nws_warnings.attributes.tornado_warning }}'
        friendly_name: 'Tornado Warning'
  - platform: template
    sensors:
      nws_tornado_watch:
        value_template: '{{ states.sensor.nws_warnings.attributes.tornado_watch }}'
        friendly_name: 'Tornado Watch'
  - platform: template
    sensors:
      nws_severe_thunderstorm_warning:
        value_template: '{{ states.sensor.nws_warnings.attributes.severe_thunderstorm_warning }}'
        friendly_name: 'Severe Thunderstorm Warning'
  - platform: template
    sensors:
      nws_winter_storm_warning:
        value_template: '{{ states.sensor.nws_warnings.attributes.winter_storm_warning }}'
        friendly_name: 'Winter Storm Warning'

#  - platform: command_line
#    name: NWS_Tornado_Watch
#    json_attributes:
#      - nws_tornado_watch
#      - nws_tornado_watch_headline
#      - nws_tornado_watch_description
#    value_template: '{{ value_json.nws_tornado_watch }}'
#    command: python /config/scripts/nws_tornado_watch.py

        ##########################################################
        ## ETH Sensor - Nanopool
        ##########################################################

  - platform: rest
    resource: !secret secret_nanopool_hashrate_url
    name: Nanopool-HashRate
    value_template: '{{ value_json.data}}'
    unit_of_measurement: "Mh/s"
  - platform: rest
    resource: !secret secret_nanopool_balance_url
    name: Nanopool-Balance
    value_template: '{{ value_json.data}}'
    unit_of_measurement: "ETH"
